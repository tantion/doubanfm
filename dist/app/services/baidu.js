angular.module("fmApp").factory("baidu",["$q","async","$timeout",function(a,b,c){"use strict";function d(){var b=a.defer();return e?b.resolve(e):seajs.use("js/fm-download-baidu",function(a){e=a,b.resolve(e)}),b.promise}var e=null,f={search:function(b){var c=a.defer();return d().then(function(a){a.search(b).done(function(a){c.resolve(a)}).fail(function(){c.reject()})},function(){c.reject()}),c.promise},searchSongs:function(e,f){var g=a.defer();return f=f||1e3,d().then(function(a){b.eachSeries(e,function(b,d){g.notify(b),a.search(b).done(function(a){g.notify(a)}).fail(function(){g.notify()}).always(function(){c(function(){d()},f)})},function(a){a?g.reject():g.resolve()})},function(){g.rejcet()}),g.promise}};return f}]);